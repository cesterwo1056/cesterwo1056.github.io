<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>cave-devblog.utf8</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 64px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h2 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h3 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h4 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h5 {
  padding-top: 69px;
  margin-top: -69px;
}
.section h6 {
  padding-top: 69px;
  margin-top: -69px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Connor T. Esterwood</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="research.html">Research</a>
</li>
<li>
  <a href="teaching.html">Teaching</a>
</li>
<li>
  <a href="service.html">Service</a>
</li>
<li>
  <a href="practice.html">Practice</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contact.html">
    <span class="fas fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/connor-esterwood-65b17157">
    <span class="fas fa-linkedin fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://dribbble.com/cte">
    <span class="fas fa-dribbble fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p><link rel="stylesheet" href="styles.css" type="text/css"></p>
<p><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></p>
<hr />
<div id="cave-development-blog" class="section level3">
<h3><em>CAVE Development Blog</em></h3>
<hr />
<a class="btn btn-primary" data-toggle="collapse" href="#10-15-20" role="button" aria-expanded="false" aria-controls="collapseExample"> Blog Update 10/15/20 - Data Extraction From Vive Pro Eye </a>
</p>
<div id="10-15-20" class="collapse">
<div class="card card-body">
<h2 id="vive-pro-eye-data-extraction">Vive Pro-Eye Data Extraction</h2>
<p>Over the past few weeks, I’ve been working to get the vive pro-eye HMD to read the data indipendely of I-Motions to CSV files in the project directory. To get this to function, I had to do some initial work with the SDK provided from VIVE. This SDK can be located <a href="https://hub.vive.com/en-US/profile/material-download">here</a>. This SDK was at first kind of hard to utilize as it had some bugs for UE-v4.25 but now that things are working and the SDK was updated I was able to write some basic blue-print functions that made data collection relatively straight forward. These blueprint functions are below:</p>
<h3 id="blueprint-for-gaze-data">Blueprint for Gaze Data</h3>
<h4 id="step-01">Step 01:</h4>
<p>Add Victory Plugin to UE4 downloadable <a href="https://www.mediafire.com/file/pgrpsf9my7tv1ae/VictoryPlugin25.zip/file">Here</a></p>
<h4 id="step-02">Step 02:</h4>
<p>Write blueprint framework</p>
<div class="figure">
<img src="images/2020-10-09_11-12-49.png.ac8669423fecd39f6c488d8d121001e5.png" alt="" />
<p class="caption">Blueprint_For_Gaze_Data</p>
</div>
<hr />
<h3 id="blueprint-for-pupil-dilation">Blueprint for Pupil dilation</h3>
<p>Pupil Dilation takes some extra work to get functional as this was not in the SDK’s function library so additional work had to be done.</p>
<h4 id="step-01-1">Step 01:</h4>
<p>Add some code to exsting SDK files in the project’s Visual Studio Code (C++)</p>
<h5 id="sranipaleye_functionlibrary.cpp">SRanipalEye_FunctionLibrary.cpp</h5>
<pre><code>bool USRanipalEye_FunctionLibrary::GetPupilDiameter(EyeIndex eye, float&amp; diameter_mm)
{
    return SRanipalEye_Core::Instance()-&gt;GetPupilDiameter(eye, diameter_mm);
}

SRanipalEye_Core.cpp

bool SRanipalEye_Core::GetPupilDiameter(EyeIndex eye, float &amp;diameter_mm)
{
    bool valid = false;
    if (SRanipalEye_Framework::Instance()-&gt;GetStatus() == SRanipalEye_Framework::FrameworkStatus::NOT_SUPPORT) {
        valid = true;
        diameter_mm = 0.0f;
    }
    else {
        UpdateData();

        Eye::SingleEyeData eyeData;
        switch (SRanipalEye_Framework::Instance()-&gt;GetEyeVersion())
        {
        case SupportedEyeVersion::version1:
            eyeData = eye == EyeIndex::LEFT ? EyeData_.verbose_data.left : EyeData_.verbose_data.right;
            break;
        case SupportedEyeVersion::version2:
            eyeData = eye == EyeIndex::LEFT ? EyeData_v2.verbose_data.left : EyeData_v2.verbose_data.right;
            break;
        }

        valid = eyeData.GetValidity(Eye::SingleEyeDataValidity::SINGLE_EYE_DATA_PUPIL_DIAMETER_VALIDITY);
        if (valid) {
            diameter_mm = eyeData.pupil_diameter_mm;
        }
        else
            diameter_mm = 0.0f;
    }
    return valid;
}</code></pre>
<h5 id="sranipal_core.h">SRanipal_Core.h</h5>
<pre><code>bool GetPupilDiameter(EyeIndex eye, float&amp; diameter_mm);</code></pre>
<h5 id="sranipaleye_functionlibrary.h">SRanipalEye_FunctionLibrary.h</h5>
<pre><code>UFUNCTION(BlueprintCallable, Category = &quot;SRanipal|Eye&quot;)
        static bool GetPupilDiameter(EyeIndex eye, float&amp; diameter_mm);</code></pre>
<h4 id="step-02-1">Step 02:</h4>
<p>Call functions in blueprint and build export framework</p>
<p><strong>NOTE: This is repeated and a second CSV is read to for the other eye (Right Eye)</strong></p>
<div class="figure">
<img src="images/2020-10-15_11-15-15.png" alt="" />
<p class="caption">Blueprint_For_Dilation_Data</p>
</div>
<hr />
<p>With these blueprints in hand and the data extraction functional, I can now measure workload as well as build gaze based data points fully of my own accord and without going through a third party software.</p>
<p>Now I just need to figure out how …. exactly …. I use pupil dilation to measure workload and implement this code in the master world project when the i-9 intel pcs arrive at the lab.</p>
<p>Furthermore, we might switch to the Varjio and if this happens I’ll make a guide for future users of the VIVE.</p>
<hr />
</div>
</div>
<a class="btn btn-primary" data-toggle="collapse" href="#09-23-20" role="button" aria-expanded="false" aria-controls="collapseExample"> Blog Update 09/23/20 - I-Motions </a>
</p>
<div id="09-23-20" class="collapse">
<div class="card card-body">
<hr />
<h2 id="i-motions-meeting">I-Motions Meeting</h2>
<p>upon completion of a demo of the i-motions software suite, I think it is a good idea to utilize this service. I am however, in the process of viewing a competitor’s work but will need some time to determine if the competitor has a good enough product to compete with i-motions.</p>
<p>One major issue with the i-motions suite however, is that they do not have full VR support out of the box for UE4 VR environments. We only really loose the object tracking and fixation effects from this which is secondary in my opinion to the pupil dilation and blink rate per my earlier entry on workload and eye tracking.</p>
<p>I anticipate that we will want this feature eventually though so some transference of data will likely have to happen where we pipe raw data into i-motions one way or another.</p>
<p>Below is the system requirements recommended for i-motions. It is unclear if we will need to run the simulation enviornment on the same computer as i-motions but we should expect to have to do so. That said, based on the lowest performance we should still be good with an i-9 VR computer system … probably …</p>
<p></br></p>
<h3 id="system-requirements-for-i-motions">System requirements for i-motions:</h3>
<table>
<colgroup>
<col width="15%" />
<col width="45%" />
<col width="15%" />
<col width="21%" />
<col width="1%" />
</colgroup>
<thead>
<tr class="header">
<th>System Performance</th>
<th>Low</th>
<th>Medium</th>
<th>High</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CPU</td>
<td>Intel i7 Generation</td>
<td>Intel i7 Generation</td>
<td>Intel i7 Generation 7 and up</td>
<td></td>
</tr>
<tr class="even">
<td>RAM</td>
<td>8 GB</td>
<td>16GB</td>
<td>32 GB</td>
<td></td>
</tr>
<tr class="odd">
<td>Hard Drive (SSD only)</td>
<td>128 GB</td>
<td>512 GB</td>
<td>1 TB</td>
<td></td>
</tr>
<tr class="even">
<td>Graphics card</td>
<td>Nvidia 9 series 2-4GB</td>
<td>Nvidia 10 series 4-6GB</td>
<td>Nvidia 10 series 6-8GB or higher</td>
<td></td>
</tr>
<tr class="odd">
<td>Operating System</td>
<td>Windows 10</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Note: Apple, windows dual boot, and windows emulators not supported.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Monitor</td>
<td>Resolution: 1920x1080 is the best supported resolution.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>Size: Dependent on eye tracker, typically 22-25” monitor.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>2 Monitors required for dual screen.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p></br></p>
<h3 id="networking">Networking</h3>
<p>One disappointing feature of i-motions is that they don’t support networking so all the physiological elements have to run off a single computer. Now this isn’t clear if it will create an issue with our architecture for the sim since we can still tap into the i-motions API service to make close to real-time decisions as needed but, it might strain whatever computer is running i-motions, the sensors, and the simulation.</p>
<p>I still think they are the place to go but I may find this coming back to bite me later on…</p>
<p></br></p>
<h3 id="varjio-hmd---vr">Varjio HMD - VR</h3>
<p>So … the varjio HMD seems quite robust and has its own unique approach to eye trakcing. Certianly this seems like somethign we may want to get our hands on in some regard. I think for now we can stick with what we have but down the line it might be a good idea for us to persue this kind of HMD since it will have a higher resolotuion and seems to offload some of the work to the HMD more than the Vive does …. still it is uncertain if it is truly superior without having some time to play with it a bit and test it with our system.</p>
<p>At present, I think the vive is good enough but the IR-eye trackers in the Varjio make it pertty enticing.</p>
<hr />
</div>
</div>
<a class="btn btn-primary" data-toggle="collapse" href="#08-18-20" role="button" aria-expanded="false" aria-controls="collapseExample"> Blog Update 09/18/20 - Eye Tracking &amp; System Recs </a>
</p>
<div id="08-18-20" class="collapse">
<div class="card card-body">
<hr />
<h2 id="eye-tracking-updates-and-pc-system-requirements">Eye tracking updates and PC system requirements</h2>
<h5 id="eye-tracking">Eye Tracking</h5>
<p>I’ve continued experimentation of the VIVE on my home system and have come to the conclusion that the pre-built free version of the eye tracking plugin is functional but limited and would take a good deal of time and effort to get to work the way we want it to. As such I have two recommendations for paid solutions that come out of the box with data extraction capabilities (or at least seem to claim to) that could significantly expedite the development of the eye tracking in our simulation. At this point, if time and effort is at a priority over cost, I would recommend that we go this route.</p>
<h6 id="a-i-motions">a) i-Motions</h6>
<p>This company claims to have a fully functioning data extraction system that could work in close to real-time as discussed. The demo will determine how much of the case this is and we will see if it is a good fit for our needs.</p>
<h6 id="b-tobii">b) Tobii</h6>
<p>Tobii has a paid SDK (plugin) that we could add to our project files that would allow for eye tracking data back and forth but, they actually can’t really do what we want with their SDK after chatting with a rep but referred me to cognitive3D which could be of use as an alternative to a manually developed soloution using the Unreal Engine and VIVE’s default SDK.</p>
<h6 id="c-cognitieve3d">c) Cognitieve3D</h6>
<p>This company seems small but also promising so I reached out for more information, I’m reviewing their information today and will get more info on their services and offerings later <a href="https://cognitive3d.com/" class="uri">https://cognitive3d.com/</a> put together for consideration.</p>
<hr />
<h5 id="pc-requirements---fps-issues">PC Requirements - FPS Issues</h5>
<p>In relation to the PC requirements and the idea of improving our performance, I think Ted’s suggestion seems to be aligning with what I can find out if we don’t want to wait for newer hardware like the NVIDIA RTX 3090 or similar which honestly seem to have some supply issues currently.</p>
<pre><code>CPU: Intel i9 10900K

RAM: 128 GB

GPU: NVIDIA RTX 2080 Ti

Storage: 2x 1 TB M.2 ssd, or 1x 2 TB M.2 ssd</code></pre>
<p>I also reached out to my professional network for recommendations and honestly, they are also struggling with the same challenges we are at this level of performance. Seems like there is quite an opportunity to advance the field if anyone can figure out how to parallelize these things effectively and efficiently.</p>
<p>At the current point parallizing the software might yield results where we do some kind of concurrent programming but that is really hard to implement and takes both time, money, and the right expertise. Apparently, whole languages are starting to emerge that are trying to make this coding easier (google’s “GO” language).</p>
<p>With things getting stuck on a single core, the only thing we could do is push the core to its physical limits and overclock it to a bit of an extreme degree (liquid cooling or nitrogen) which is not exactly stable or sustainable as far as I have heard. Barring that we are going to have to start cutting but, we might be able to avoid that if we push for some parallelizing to increase performance. Still, its cutting edge so unstable by nature.</p>
<hr />
</div>
</div>
<a class="btn btn-primary" data-toggle="collapse" href="#sens_wl" role="button" aria-expanded="false" aria-controls="collapseExample"> Blog Update 09/08/20 - Sensor Search &amp; Workload </a>
</p>
<div id="sens_wl" class="collapse">
<div class="card card-body">
<hr />
<h2 id="sensor-investigations-workload">Sensor Investigations Workload</h2>
<p>Examinign existing research I was able to identify a suite of different sensors for measuring workload. These sensors were fairy robust but some appeared easier to implement than others. Specifically, I saw GSR and Eye tracking as very suitable measurement instruments with little nosie transmission between them. A good paper in Sensors provided me with the following table that I used to make decisions about what I want to pull.</p>
<p><img src="images/Workload_phys_table.png" /></p>
<p>I decided to start with eye tracking since we already have that sensor but have sense foudn additional sensors in the lab, namely, GSR.</p>
<hr />
</div>
</div>
<a class="btn btn-primary" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample"> Blog Kick-Off - Project outline </a>
</p>
<div id="collapseExample" class="collapse">
<div class="card card-body">
<hr />
<h2 id="blog-purpose-and-project-outline">Blog Purpose and Project Outline</h2>
<p>Starting in August of 2020 I joined a team of engineers at the University of Michigan’s automotive research center with the goal of integrating human subjects into a autonomous driving simulation platform. This platform was original built as an HiL simulator and is now being expanded for the inclusion of a human subjects branch. My team is currently focusing on three different thrust areas.</p>
<p>These thrust areas are:</p>
<ol style="list-style-type: decimal">
<li>Establish physiological sensors to gather useful data from human subjects related to workload, situational awareness, and similar metrics.</li>
<li>Establish the ability of the human actor to interface with the virtual world via a simulated vehicle cab and VR headset.</li>
<li>Establish bi-directional communication modalities such as touch, voice, and physical signaling between the virtual agents and the humans in the simulator.</li>
</ol>
<p>The purpose of this html blog is to log my progress on these projects.</p>
<p><strong>Presently there is a rough gant chart I’m using to tack things live <a href="https://plan.toggl.com/#pp/Hcz3dlYWWxXe7Mrpabq9CsrNtpYrpSkJ">here</a></strong></p>
<hr />
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
